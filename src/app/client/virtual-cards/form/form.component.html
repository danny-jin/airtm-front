<div class="container">
  <h1 class="text-dark mb-50">{{ 'client.virtual-cards.setup-virtual-card' | translate }}</h1>
  <form class="w-100" [formGroup]="form">
    <div class="d-flex flex-column mb-30">
      <h5 class="text-dark mb-20">{{  'client.virtual-cards.card-name' | translate }}</h5>
      <app-text-input id="{{ prefix }}_cardName" placeholder="{{ 'client.virtual-cards.i-e-phone-bill' | translate }}" formControlName="cardName"></app-text-input>
    </div>
    <div class="row">
      <h5 class="text-dark mb-20">{{  'client.virtual-cards.amount' | translate }}</h5>
      <div class="col-12 col-lg-6 mb-20">
        <app-currency-input label="{{ 'client.virtual-cards.card-value' | translate }}" [isCurrencyLocked]="true" currencyCode="USD" formControlName="cardValue"></app-currency-input>
      </div>
      <div class="col-12 col-lg-6 mb-20">
        <app-currency-input label="{{ 'client.virtual-cards.local-currency-equivalent' | translate }}" [isCurrencyLocked]="false" formControlName="localCurrencyEquivalent"></app-currency-input>
      </div>
      <div class="d-flex bg-color-chablis rounded-2 px-10 py-20 mb-30" *ngIf="isWarning">
        <div class="d-flex align-items-start">
          <app-icon icon="danger" color="brick-red" [width]="24" ></app-icon>
        </div>
        <div class="ms-10 d-flex flex-column">
          <h6 class="text-dark mb-10">{{ 'client.virtual-cards.card-value-must-be-within' | translate }}</h6>
          <div class="d-flex mb-10">
            <span>{{ 'client.virtual-cards.minimum' | translate }}: {{ minimumCardValue | number }}USD | 1.67 SGD</span>
          </div>
          <div class="d-flex">
            <span>{{ 'client.virtual-cards.maximum' | translate }}: {{ maximumCardValue | number }}USD | 133.65 SGD</span>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6 mb-20">
        <app-currency-input label="{{ 'client.virtual-cards.total-cost-of-card' | translate }}" [isCurrencyLocked]="true" currencyCode="AirUSD" formControlName="totalCost"></app-currency-input>
      </div>
    </div>
    <div class="btn btn-transparent rounded-pill px-15 mb-5" (click)="showDetail = !showDetail">
      <div class="d-flex align-items-center">
        <ng-container *ngIf="showDetail; else hideDetail">
          <span class="fs-5 fw-bold text-primary me-5">-</span> {{ 'client.virtual-cards.hide-fee-details' | translate }}
        </ng-container>
        <ng-template #hideDetail>
          <span class="fs-5 fw-bold text-primary me-5">+</span> {{ 'client.virtual-cards.show-fee-details' | translate }}
        </ng-template>
      </div>
    </div>
    <div class="d-flex flex-column bg-color-alice-blue rounded-2 px-10 py-15" *ngIf="showDetail">
      <div class="d-flex justify-content-between align-items-center mb-10">
        <span class="text-info">{{ 'client.virtual-cards.card-value' | translate }}</span>
        <span class="text-info">${{ form.get('cardValue')?.value | number : '1.2-2' }} AirUSD</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-10">
        <span class="text-info">{{ 'client.virtual-cards.setup-fee' | translate }}</span>
        <span class="text-info">${{ setupFee | number : '1.2-2' }} AirUSD</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-10">
        <span class="text-info">{{ 'client.virtual-cards.funding-fee' | translate }} ({{ form.get('fundingFee')?.value }}%)</span>
        <span class="text-info">${{ fundingFee | number : '1.2-2' }} AirUSD</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-10 border-bottom">
        <span class="text-info">{{ 'client.virtual-cards.service-fee' | translate }} ({{ form.get('serviceFee')?.value }}%)</span>
        <span class="text-info">${{ serviceFee | number : '1.2-2' }} AirUSD</span>
      </div>
      <div class="d-flex justify-content-between align-items-center">
        <span class="text-info">{{ 'client.virtual-cards.total' | translate }}</span>
        <span class="text-info">${{ form.get('totalCost')?.value | number : '1.2-2' }} AirUSD</span>
      </div>
    </div>
    <div class="d-flex my-20">
      <mat-checkbox class="text-info" id="{{ prefix }}_isConfirmed" formControlName="isConfirmed">
        {{ 'client.virtual-cards.i-understand' | translate }}
      </mat-checkbox>
    </div>
    <div class="d-flex justify-content-center">
      <button class="btn btn-gray-1 rounded-pill width-120 height-50 me-20" ngxScrollTo="root" [routerLink]="[ROUTES.client.root, ROUTES.client.virtualCards.root] | routeToAbsolute">{{ 'client.virtual-cards.cancel' | translate }}</button>
      <button class="btn btn-primary rounded-pill width-100 height-50" (click)="next()">{{ 'client.virtual-cards.next' | translate }}</button>
    </div>
  </form>
</div>
